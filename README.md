# hungry-snake
a funny game demo
# 下面是整个游戏的大致思路，结合自己的想法一点一点写出来

### 整体构造风格
- 通过自调用函数并传入`window`对象作为参数
- 每个对象由构造函数与原型对象实现方法的共享，节约存储空间
- 在自调用函数尾部将当前构造函数的实例或构造函数本身暴露给`window`对象
- 初始化地图DOM对象，保证该DOM对象在所有对象方法调用之前声明

### 随机食物对象
需求：每次游戏初始化时，代表食物的小方块随机在地图中出现，不能超过地图边界，食物被蛇头碰到之后，删除当前的食物，重新随机初始化一个食物在地图上
思路：
- 创建随机数对象，方便构造随机数以供食物对象使用
- 声明一个存储每次产生的食物DOM对象的数组，以便后续该对象的删除
- 创建`Food`构造函数
- 在原型对象`Food.prototype`中添加`init()`初始化食物方法
- 将每次产生的食物DOM对象`push`到数组中
- 创建私有函数`remove`，并且在`init()`方法开头进行调用，目的是删除上一次产生的食物DOM对象
- 最后将`Food`构造函数暴露给全局变量`window`

### 小蛇对象
需求：游戏初始化时，小蛇被初始化，并且自动向地图右边界前进，可以根据键盘"上""下""左""右"键控制方向。碰到边界时游戏结束，碰到食物时，删除当前的食物，重新随机初始化一个食物在地图上。并且小蛇身体部分增加一块身体
- 创建小蛇对象的方法与食物大致相同
- 使用文档的`document.addEventListener`方法，监听键盘`keydown`事件，控制小蛇的方向
- 小蛇移动通过将头的坐标赋值给身体第一部分，第一部分的身体赋值给第二部分，删除最后一部分身体来实现
- 小蛇碰到食物通过比较蛇头和食物的坐标来实现，当两者重合时，在蛇的`body`数组中，将当前蛇最后一个对象复制一份到该数组尾部（虽然我现在是在没搞清为什么是复制，如果复制的话，坐标相同，蛇尾对象不就和新复制对象重合了吗？）
- 啊啊啊啊啊啊，我实在想不通啊，我也验证了，每次碰到食物之后确实倒数第一和倒数第二永远都是一样的啊，怎么会长出来一截啊
- 经过测试发现，每次碰到食物时，会在body数组尾部复制一份原来的尾部，倒数第一和倒数第二是一样的，下一次初始化小蛇时，新增的那个在这次初始化中不改变，这时原数组的坐标都会增加，再下一次初始化后，数组中所有成员包括新增的一起变化
- 新增的尾部并没有存入`elements`数组，下一次初始化小蛇时，会将原数组且在`elements`中的对象全部删除，然后重新按照新数组重新渲染小蛇
- `move`方法会向后覆盖，所以最后一个复制的方法具体是什么值并不重要，只需要隐藏起来就行，所以复制原数组最后一个是最好的选择
- 终于解决了哈哈哈
- 最后调用食物的`init`方法，重新生成一个食物


